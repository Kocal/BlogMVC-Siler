{% extends 'layout.twig' %}

{% block title -%}
    {{ post.name }}
{%- endblock %}

{% block content %}
    <div class="page-header">
        <h1>{{ post.name }}</h1>
        <p>
            <small>
                Category : <a href="/category/{{ post.category.slug }}">{{ post.category.name }}</a>,
                by <a href="/authors/{{ post.user.id }}">{{ post.user.username }}</a> on <em>{{ post.created }}</em>
            </small>
        </p>
    </div>

    <article>
        {% autoescape false %}
            {{ post.content | to_markdown }}
        {% endautoescape %}
    </article>

    <section class="comments">
        <h3>Comment this post</h3>

        <div class="alert alert-danger"><strong>Oh snap !</strong> you did some errors</div>

        <form role="form">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <input type="email" class="form-control" placeholder="Your email">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group has-error">
                        <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Your username">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <textarea class="form-control" rows="3" placeholder="Your comment"></textarea>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>

        <h3>{{ post.comments | length}} Comment(s)</h3>

        {% for comment in post.comments %}
            <div class="row">
                <div class="col-md-2">
                    <img src="https://www.gravatar.com/avatar/{{ md5(comment.email) }}" width="100%">
                </div>
                <div class="col-md-10">
                    <p><strong>{{ comment.username }}</strong>, on {{ comment.created }}</p>
                    <p>{{ comment.content }}</p>
                </div>
            </div>
        {% endfor %}
    </section>

{% endblock %}